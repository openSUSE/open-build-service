<%= error_messages_for 'group' %>

<!--[form:group]-->
<dl>
  <dt><label for="group_title">Group's Name</label></dt>
  <dd><%= text_field 'group', 'title'  %></dd>

  <dt><label>Global Roles</label></dt>
  <dd>
    <%= node_tree(Role.find(:all, :conditions => "global=true")) do |role|
          result = "<input id=\"group_roles_#{role.id}\" type=\"checkbox\" name=\"group[roles][]\" value=\"#{role.id}\" checked=\"checked\" /> ".html_safe if @group.roles.include? role
          result = "<input id=\"group_roles_#{role.id}\" type=\"checkbox\" name=\"group[roles][]\" value=\"#{role.id}\" /> ".html_safe unless @group.roles.include? role
          result += "<label for=\"group_roles_#{role.id}\">#{role.title}</label> ".html_safe
          result
        end %>
  </dd>
</dl>
<!--[eoform:group]-->

