// Variables
// TODO: move to app/assets/stylesheets/webui/bootstrap_variables/sizes.scss
$top-bar-height: 3.5625rem;
$bottom-bar-height: 3.5rem;

body.responsive-ux {
  // open space to not overlap top navigation with content
  padding-top: 3.5rem !important;

  @import 'responsive_ux/layout';
  @import 'responsive_ux/build-result';
  @import 'responsive_ux/sponsors';
  @import 'responsive_ux/tabs';
  @import 'responsive_ux/notifications';

  .build-results .sticky-top { top: $top-bar-height; }
  #log-space-wrapper #log-info.position-sticky { top: $top-bar-height; }
  #notifications-filter-desktop {
    strong { cursor: pointer; }
    .collapse {
      &.show { border-top: 1px solid $gray-300;}
    }
  }

}

// FIXME: move to somewhere else?

@include media-breakpoint-up(md) {

  body.responsive-ux {
    // START LAYOUT
    .watchlist-collapse, .offcanvas-collapse, .actions-collapse {
      bottom: 0;
      width: 23.75rem;

      .navbar-nav {
        width: 100%;
        padding-top: 1rem;
        margin-left: 0 !important;
        -webkit-box-orient: vertical;
        flex-direction: column;
        align-self: flex-start;
      }
      .navbar-toggler { display: none; }
    }

    #footer {
      .footer-logged { padding-bottom: 0; }
    }
    // END LAYOUT

    .build-info .triangle {
      &.left { left: .25rem; }
    }

    #notifications-filter-desktop {
      .collapse { display: block !important; }
    }

    .grid-container {
      min-height: 6.25rem;
      grid-template-columns: 1fr auto 3rem;
      grid-template-areas:
        "notifiable who-when action"
        "content content content";
    }
  }
}

@include media-breakpoint-between(sm, md) {
  body.responsive-ux {
    .build-info .triangle {
      &.center { margin-left: calc(38% + .75rem); }
      &.left { left: .5rem; }
    }
  }
}

@include media-breakpoint-between(xs, sm) {
  body.responsive-ux {
    #notifications-filter-desktop {
      &.show { border-top: 1px solid $gray-300; }
      &.sticky-top { top: $top-bar-height; }
      #filters {
        max-height: 100vw; overflow: auto;
        -webkit-box-shadow: 2px 3px 5px rgba(0,0,0,.2);
        -moz-box-shadow: 2px 3px 5px rgba(0,0,0,.2);
        box-shadow: 2px 3px 5px rgba(0,0,0,.2);
      }
    }
  }
  @media (orientation: landscape){
    body.responsive-ux {
      #notifications-filter-desktop{
        #filters{ max-height: 20vw; }
      }
    }
  }
}
